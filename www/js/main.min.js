function page_navigator(e){console.log("page_navigator page: "+e),$(document).find("#pages").css({left:-100*e+"vw"}),localStorage.setItem("page",e)}function content_parse(e,t){current_page=t||page,console.log("content_parse"),console.log("current_page: "+current_page),current_page>1&&(arrPage_url=page_url.split("/"),arrPage_url[arrPage_url.length-1]="index.htm",parent_page_url=arrPage_url.join("/"),$.post(parent_page_url,function(e){content_parse(e,1)}));var e=$("<div/>").html(e),a=$(e).find("header").length>0?$(e).find("header").html():"",n=$(e).find("main").length>0?$(e).find("main").html():"",o=$(e).find("main").length>0?$(e).find("main").attr("class"):"",i=$(e).find("footer").length>0?$(e).find("footer").html():"";$(document).find("#pages .page._"+current_page+" header .block_header_items").html(a),$(document).find("#pages .page._"+current_page+" main").html(n),$(document).find("#pages .page._"+current_page+" main").addClass(o),$(document).find("#pages .page._"+current_page+" footer").html(i),$(document).find("#main_menu li."+o).addClass("_active_").siblings().removeClass("_active_")}function template_parse(e,t){arrTemplate=t.split("/"),sTemplatePath="templates/"+t+".htm",$.post(sTemplatePath,function(t){t=$("<div/>").html(t);$.each(e,function(e,a){$(t).find("main [data-key="+e+"]").prepend(a)}),content_parse(t)})}function profile_progress(){$(document).find(".profile_progress").length>0&&$(document).find(".profile_progress .step._yes").each(function(e,t){height=100,$(this).find("._tree").data().progress&&(height=$(this).find("._tree").data().progress),$(this).find("._tree span:eq(1)").css({height:height+"%","transition-delay":e+"s"})})}function authorization(){}page=0,page_url="",site_url="http://m97731yi.beget.tech/",session_key="",ajax_salt={app:"app"},localStorage.getItem("page")&&(page=localStorage.getItem("page")),localStorage.getItem("session_key")&&(session_key=localStorage.getItem("session_key"),ajax_salt.session_key=session_key),$(function(){$(document).on("click","#main_menu_back",function(){page--,page_navigator(page)}),$(document).on("click",".content_upload",function(){return page_url=$(this).attr("href"),page=$(this).data().page?$(this).data().page:1,console.log("upload_content : "+page),page_url.indexOf("http")>=0?(console.log("С сайта"),$.ajax({url:page_url,data:$(this).serialize(),xhrFields:{withCredentials:!1}}).done(function(e){$(document).find("#pages .page._"+page).html(e),page_navigator(page)})):(console.log("С приложения"),$.post(page_url,function(e){content_parse(e),console.log(page),page_navigator(page)})),$("#main_menu_show").removeClass("_active_"),$("#main_menu").removeClass("_active_"),$("body").removeClass("_no_active_"),!1}),$(document).on("click","#main_menu_show",function(){$(this).toggleClass("_active_"),$("#main_menu").toggleClass("_active_"),$("body").toggleClass("_no_active_")}),$(document).on("click","#main_menu li a",function(){$(this).parents("li").addClass("_active_").siblings().removeClass("_active_"),$("#main_menu").removeClass("_active_"),$("body").removeClass("_no_active_")}),$(document).on("click","#profile_exit",function(){page_navigator(0)}),$(document).find("#authorization_form").on("submit",function(){return $.ajax({url:site_url+"app.php",data:$(this).serialize(),xhrFields:{withCredentials:!1}}).fail(function(e){$("#authorization_form_status").html('<p style="color:#ff7f7f;">'+e.status+"<br/>"+e.statusText+"</p>")}).done(function(e){$("#authorization_form_status").html(""),session_key=e,localStorage.setItem("session_key",session_key),ajax_salt.profile=1,$.ajax({url:site_url+"app.php",data:ajax_salt,xhrFields:{withCredentials:!1}}).fail(function(e){$("#authorization_form_status").html('<p style="color:#ff7f7f;">'+e.status+"<br/>"+e.statusText+"</p>")}).done(function(e){$("#authorization_form_status").html(""),oProfile=jQuery.parseJSON(e),template_parse(oProfile,"profile/index"),page_navigator(1)})}),!1})});