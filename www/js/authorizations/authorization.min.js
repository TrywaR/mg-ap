function authorization(){session_key?(active_buttons(),content_upload("templates/profile.htm")):(active_buttons(),content_upload("templates/authorizations/authorization.htm"))}function authorization_message(o,t){o=o||0,$(document).find(".authorization_form .form_status").removeClass("_error"),0==o&&$(document).find(".authorization_form .form_status").html(""),0==o&&$(document).find(".authorization_form .form_status").html(t),1==o&&$(document).find(".authorization_form .form_status").addClass("_error").html(t)}$(function(){authorization(),console.log("detected"),$(document).on("submit","#authorization_form",function(){var o=[];return o=$(this).serializeArray(),$.ajax({url:site_url+"api/v1/accounts/login/",data:o,method:"POST"}).fail(function(o){return o.responseJSON&&o.responseJSON.detail?(console.log(o.responseJSON.detail),authorization_message(1,'<p style="color:#ff7f7f;">'+o.responseJSON.detail+"</p>"),!1):(console.log(o),!1)}).done(function(o){console.log(o),o.token&&(localStorage.setItem("session_key",session_key=o.token),authorization(),o.detail&&authorization_message(1,'<p style="color:#ff7f7f;">'+o.detail+"</p>"))}),!1}),$(document).on("submit","#password_form",function(){return!1}),$(document).on("submit","#password-code_form",function(){return!1}),$(document).on("submit","#password-new_form",function(){return!1}),$(document).on("click","#profile_exit",function(){localStorage.removeItem("session_key"),session_key="",authorization()})});