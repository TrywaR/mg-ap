function video_checker(){console.log("video_checker"),$(document).find("#video").find(".video").each(function(){var e=$(this),i=e.find("._video video"),d=e.data().id,s=(i.find("source").attr("src"),i[0]),a={};user.passed_video&&(a=$.parseJSON(user.passed_video)),a[d]>0?e.find("._video").find("._prev").addClass("__chek"):s.onplaying=function(){VideoTimer=setTimeout(function(){var i={video_checked:d};$.ajax({url:site_url,data:$.extend(i,ajax_salt),method:"POST"}).fail(function(e){return app_status({error:"Ошибка соединения"}),!1}).done(function(e){if(e){var i=$.parseJSON(e);app_status(i),i.id>0&&(user=i,localStorage.setItem("user",JSON.stringify(user)))}}),e.find("._video").find("._prev").addClass("__chek")},1e3)},e.delay("slow").addClass("_load_")})}function video_html(e){var i="";return i+='<div class="item video" data-id="'+e.id+'">',e.name&&(i+='<div class="_name">'+e.name+"</div>"),e.src&&(i+='<div class="_video">',e.overlay&&(i+='<div class="_prev" style="background: url('+site_url+e.overlay+') ">',i+="</div>"),i+='<video width="100%" height="250" controls="controls">',i+='<source src="'+site_url+e.src.substr(1)+'" type=\'video/mp4; codecs="avc1.42E01E, mp4a.40.2"\'>',i+="Тег video не поддерживается вашим браузером.",i+="</video>",i+="</div>"),e.description&&(i+='<div class="_description">'+e.description+"</div>"),i+="</div>"}function video_init(){var e="",i={theme:arrPageParams.id,video:!0};$.ajax({url:site_url,data:$.extend(i,ajax_salt),method:"POST"}).fail(function(e){return app_status({error:"Ошибка соединения"}),!1}).done(function(i){var d=$.parseJSON(i);app_status(d),e="",d.video.length>0&&($.each(d.video,function(i,d){e+=video_html(d)}),$(document).find("main").find(".block_video").addClass("_show_"),$(document).find("#video").html(e),video_checker())}),$(document).on("click","#video .video ._video ._prev",function(){$(this).next("video").length>0&&!$(this).next("video").hasClass("_active_")&&($(this).parents(".video").addClass("_active_").siblings().removeClass("_active_"),$(this).next("video").trigger("play"),$(this).parents(".video").siblings().find("video").trigger("pause"))})}